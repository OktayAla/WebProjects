<?php
 goto bgnoI; OK_WP: foreach ($employees as $employee) { ?>
<option value="<?php  echo $employee["\x69\x64"]; ?>
"><?php  echo $employee["\156\x61\x6d\x65"]; ?>
(<?php  echo $employee["\x64\x65\160\x61\x72\164\x6d\x65\156\164"]; ?>
)</option><?php  } goto kHmzS; bgnoI: session_start(); goto BbnTP; WJ6Fe: if (file_exists($cardsFile)) { $cards = json_decode(file_get_contents($cardsFile), true); } goto EkokH; Pe1mj: ?>
</p></div></div><nav class="sidebar-nav"><ul><li><a href="index.php"><i class="fas fa-home"></i> Ana Sayfa</a></li><li><a href="attendance.php"><i class="fas fa-clock"></i> Giriş/Çıkış Kayıtları</a></li><li><a href="leave_requests.php"><i class="fas fa-calendar-alt"></i> İzin Talepleri</a></li><li><a href="advance_requests.php"><i class="fas fa-money-bill-wave"></i> Avans Talepleri</a></li><?php  goto b1qGg; jg5dS: if ($userRole == "\141\144\x6d\151\x6e") { ?>
<li><a href="employee_management.php"><i class="fas fa-user-cog"></i> Personel Yönetimi</a></li><li><a href="department_management.php"><i class="fas fa-building"></i> Departman Yönetimi</a></li><li><a href="card_management.php"class="active"><i class="fas fa-id-card"></i> Kart Yönetimi</a></li><li><a href="reports.php"><i class="fas fa-chart-bar"></i> Raporlar</a></li><?php  } goto XAjb8; zao45: $userName = $_SESSION["\x6e\x61\155\x65"]; goto cGiXQ; TTaRm: $userId = $_SESSION["\x75\163\145\162\x5f\x69\144"]; goto zao45; OT31z: ?>
<div class="mb-4 row"><div class="col-md-6"><div class="card"><div class="card-header"><h5><i class="fas me-2 fa-plus-circle"></i>Yeni Kart Ekle</h5></div><div class="card-body"><form action=""method="post"><input name="action"type="hidden"value="add"><div class="mb-3"><label class="form-label"for="new_card_id">Kart ID</label> <input name="new_card_id"class="form-control"id="new_card_id"required><div class="form-text">RFID kart numarasını giriniz.</div></div><button class="btn btn-primary"type="submit"><i class="fas me-2 fa-plus-circle"></i>Kart Ekle</button></form></div></div></div><div class="col-md-6"><div class="card"><div class="card-header"><h5><i class="fas me-2 fa-link"></i>Kart Ata</h5></div><div class="card-body"><form action=""method="post"><input name="action"type="hidden"value="assign"><div class="mb-3"><label class="form-label"for="card_id">Kart Seçin</label> <select class="form-select"id="card_id"name="card_id"required><option value="">Kart seçin</option><?php  goto r62PG; FeWkj: $cardsFile = "\144\141\x74\141\x2f\x63\x61\x72\144\163\x2e\x6a\163\157\156"; goto sCTc3; kHmzS: ?>
</select></div><button class="btn btn-success"type="submit"><i class="fas me-2 fa-link"></i>Kart Ata</button></form></div></div></div></div><div class="card"><div class="card-header"><h5><i class="fas me-2 fa-id-card"></i>Kayıtlı Kartlar</h5></div><div class="card-body"><div class="table-responsive"><table class="table table-hover"><thead><tr><th>Kart ID</th><th>Durum</th><th>Atanan Personel</th><th>Atanma Tarihi</th><th>İşlemler</th></tr></thead><tbody><?php  goto BvWLs; AmBum: if ($userRole == "\x61\144\x6d\x69\x6e") { echo "\304\xb0\x4b\40\x59\xc3\xb6\156\x65\164\151\x63\x69\163\151"; } else { if ($userRole == "\x6d\x61\156\141\147\145\x72") { echo "\102\151\x72\151\155\x20\x4d\xc3\274\144\303\xbc\x72\xc3\274"; } else { echo "\x50\145\162\x73\x6f\x6e\145\x6c"; } } goto Pe1mj; gdYKT: if (isset($errorMessage)) { ?>
<div class="alert alert-dismissible fade show alert-danger"role="alert"><i class="fas me-2 fa-exclamation-circle"></i><?php  echo $errorMessage; ?>
<button class="btn-close"type="button"aria-label="Close"data-bs-dismiss="alert"></button></div><?php  } goto OT31z; BvWLs: if (empty($cards)) { ?>
<tr><td class="text-center"colspan="5">Kayıtlı kart bulunamadı.</td></tr><?php  } else { foreach ($cards as $card) { ?>
<tr><td><?php  echo $card["\143\x61\x72\144\137\151\x64"]; ?>
</td><td><?php  if ($card["\x73\x74\x61\164\165\163"] === "\141\x63\x74\151\x76\145") { ?>
<span class="badge bg-success">Aktif</span><?php  } else { ?>
<span class="badge bg-secondary">Pasif</span><?php  } ?>
</td><td><?php  if (!empty($card["\145\x6d\x70\x6c\157\171\x65\x65\x5f\x69\x64"])) { $employeeName = "\102\151\154\x69\x6e\x6d\145\x79\x65\156"; foreach ($employees as $employee) { if ($employee["\x69\144"] == $card["\145\155\x70\x6c\x6f\x79\x65\145\x5f\151\x64"]) { $employeeName = $employee["\156\x61\155\145"]; break; } } echo $employeeName; } else { echo "\74\x73\x70\141\x6e\x20\x63\x6c\x61\163\163\75\x22\x74\145\x78\x74\x2d\155\x75\164\x65\x64\x22\76\101\164\141\x6e\x6d\x61\x6d\304\xb1\305\x9f\74\57\163\160\x61\x6e\x3e"; } ?>
</td><td><?php  if (!empty($card["\141\x73\x73\151\x67\x6e\145\x64\137\x64\x61\164\145"])) { echo date("\144\56\x6d\x2e\131\40\x48\72\x69", strtotime($card["\141\163\163\151\x67\156\x65\144\x5f\x64\141\164\x65"])); } else { echo "\74\163\160\x61\x6e\x20\143\154\x61\x73\x73\75\42\164\x65\170\164\x2d\155\165\164\x65\x64\x22\76\55\x3c\x2f\163\x70\141\156\x3e"; } ?>
</td><td><?php  if (!empty($card["\x65\155\x70\154\x6f\x79\145\145\x5f\x69\144"])) { ?>
<form action=""method="post"class="d-inline"><input name="action"type="hidden"value="unassign"> <input name="card_id"type="hidden"value="<?php  echo $card["\143\x61\x72\x64\x5f\151\144"]; ?>
"> <button class="btn btn-sm btn-warning"type="submit"onclick='return confirm("Kart atamasını kaldırmak istediğinize emin misiniz?")'><i class="fas fa-unlink"></i> Atamayı Kaldır</button></form><?php  } ?>
<form action=""method="post"class="d-inline"><input name="action"type="hidden"value="delete"> <input name="card_id"type="hidden"value="<?php  echo $card["\x63\x61\162\x64\137\151\x64"]; ?>
"> <button class="btn btn-sm btn-danger"type="submit"onclick='return confirm("Kartı silmek istediğinize emin misiniz?")'><i class="fas fa-trash"></i> Sil</button></form></td></tr><?php  } } goto MzjGh; ZaM1D: if (file_exists($employeesFile)) { $employees = json_decode(file_get_contents($employeesFile), true); } goto FeWkj; EkokH: ?>
<!doctypehtml><html lang="tr"><head><meta charset="UTF-8"><meta content="width=device-width,initial-scale=1"name="viewport"><title>HRMS - Kart Yönetimi</title><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"rel="stylesheet"><link href="css/style.css"rel="stylesheet"></head><body><div class="app-container"><aside class="sidebar"><div class="sidebar-header"><img alt="HRMS Logo"src="img/logo.png"class="logo"><h3>HRMS</h3></div><div class="user-info"><div class="user-avatar"><img alt="User Avatar"src="img/avatars/default.png"></div><div class="user-details"><h4><?php  goto XVCk4; b1qGg: if ($userRole == "\x6d\x61\156\x61\x67\145\x72") { ?>
<li><a href="team_management.php"><i class="fas fa-users"></i> Ekip Yönetimi</a></li><li><a href="approval_requests.php"><i class="fas fa-tasks"></i> Onay Bekleyen Talepler</a></li><?php  } goto jg5dS; h2vg0: if (isset($successMessage)) { ?>
<div class="alert alert-dismissible fade show alert-success"role="alert"><i class="fas me-2 fa-check-circle"></i><?php  echo $successMessage; ?>
<button class="btn-close"type="button"aria-label="Close"data-bs-dismiss="alert"></button></div><?php  } goto gdYKT; r62PG: foreach ($cards as $card) { ?>
<option value="<?php  echo $card["\143\141\162\144\x5f\151\144"]; ?>
"><?php  echo $card["\143\141\x72\x64\x5f\x69\x64"]; if (!empty($card["\145\155\160\x6c\157\171\x65\145\x5f\x69\x64"])) { ?>
(Atanmış)<?php  } ?>
</option><?php  } goto gukZe; padJm: $employeesFile = "\x64\x61\164\141\x2f\x65\155\160\x6c\x6f\x79\145\145\x73\56\x6a\163\x6f\156"; goto sGIES; BbnTP: if (!isset($_SESSION["\165\163\145\x72\137\151\144"])) { header("\114\157\x63\141\x74\x69\157\156\x3a\x20\x6c\157\147\151\156\x2e\160\x68\160"); die; } goto fwX5X; fwX5X: if ($_SESSION["\x72\x6f\154\145"] !== "\x61\x64\155\x69\x6e") { header("\114\157\143\x61\x74\x69\157\156\72\x20\x69\156\144\x65\x78\x2e\160\x68\160"); die; } goto TTaRm; LSVeC: if ($_SERVER["\x52\x45\121\125\105\123\124\137\x4d\105\x54\110\x4f\x44"] == "\x50\x4f\x53\124") { $action = isset($_POST["\141\143\164\151\157\156"]) ? $_POST["\x61\143\x74\x69\x6f\156"] : ''; $cardsFile = "\144\x61\164\141\57\143\141\x72\144\163\x2e\x6a\163\x6f\x6e"; $cards = array(); if (file_exists($cardsFile)) { $cards = json_decode(file_get_contents($cardsFile), true); } if ($action === "\x61\x73\163\x69\147\x6e") { $cardId = $_POST["\x63\141\x72\x64\137\x69\144"]; $employeeId = $_POST["\x65\x6d\160\x6c\x6f\171\145\145\x5f\151\144"]; $cardExists = false; foreach ($cards as &$card) { if ($card["\143\x61\162\x64\x5f\151\x64"] === $cardId) { $card["\145\155\x70\x6c\157\x79\145\x65\137\x69\144"] = $employeeId; $card["\141\x73\163\x69\x67\x6e\x65\144\137\x64\141\x74\x65"] = date("\131\x2d\x6d\x2d\x64\40\x48\72\x69\x3a\163"); $cardExists = true; break; } } if (!$cardExists) { $cards[] = array("\143\141\x72\144\x5f\x69\144" => $cardId, "\145\x6d\160\x6c\157\x79\x65\x65\x5f\151\144" => $employeeId, "\141\163\163\151\x67\156\145\144\137\144\x61\x74\145" => date("\131\55\155\x2d\144\40\x48\x3a\151\x3a\x73"), "\163\164\x61\164\x75\163" => "\x61\143\x74\x69\x76\x65"); } file_put_contents($cardsFile, json_encode($cards, JSON_PRETTY_PRINT)); $successMessage = "\113\x61\162\164\40\142\141\xc5\x9f\141\x72\304\261\x79\x6c\x61\40\141\164\141\156\x64\304\xb1\56"; } elseif ($action === "\x75\x6e\141\x73\163\x69\x67\x6e") { $cardId = $_POST["\x63\x61\162\144\137\151\144"]; foreach ($cards as &$card) { if ($card["\x63\x61\x72\x64\137\151\x64"] === $cardId) { $card["\x65\155\160\154\x6f\171\x65\x65\x5f\x69\144"] = null; $card["\x61\x73\163\x69\x67\x6e\x65\x64\x5f\x64\141\x74\x65"] = null; $card["\163\164\141\164\165\163"] = "\151\156\x61\x63\164\151\166\x65"; break; } } file_put_contents($cardsFile, json_encode($cards, JSON_PRETTY_PRINT)); $successMessage = "\x4b\141\162\164\x20\141\x74\141\x6d\141\x73\xc4\xb1\x20\x62\x61\xc5\237\141\x72\304\261\x79\x6c\141\x20\x6b\x61\154\x64\304\261\162\xc4\xb1\x6c\144\304\xb1\x2e"; } elseif ($action === "\141\x64\x64") { $cardId = $_POST["\156\145\x77\137\x63\x61\162\144\x5f\x69\144"]; $cardExists = false; foreach ($cards as $card) { if ($card["\143\141\162\144\137\x69\x64"] === $cardId) { $cardExists = true; break; } } if (!$cardExists) { $cards[] = array("\x63\x61\x72\x64\137\x69\x64" => $cardId, "\x65\x6d\160\x6c\x6f\171\x65\x65\137\151\144" => null, "\141\x73\163\x69\147\x6e\145\144\137\144\141\164\x65" => null, "\163\164\141\x74\x75\163" => "\x69\156\141\143\164\151\x76\145"); file_put_contents($cardsFile, json_encode($cards, JSON_PRETTY_PRINT)); $successMessage = "\131\x65\x6e\x69\x20\153\141\162\164\x20\142\141\305\x9f\141\x72\xc4\261\x79\154\141\x20\x65\153\x6c\145\156\144\x69\56"; } else { $errorMessage = "\x42\x75\40\x6b\141\162\x74\x20\111\x44\47\163\x69\x20\172\x61\x74\x65\156\x20\163\x69\163\164\x65\155\x64\x65\40\153\x61\x79\xc4\xb1\164\154\xc4\xb1\x2e"; } } elseif ($action === "\x64\145\154\x65\164\x65") { $cardId = $_POST["\x63\x61\x72\144\x5f\151\144"]; foreach ($cards as $key => $card) { if ($card["\x63\x61\162\x64\137\x69\144"] === $cardId) { unset($cards[$key]); break; } } $cards = array_values($cards); file_put_contents($cardsFile, json_encode($cards, JSON_PRETTY_PRINT)); $successMessage = "\113\x61\162\x74\x20\142\x61\xc5\237\x61\x72\304\261\171\x6c\x61\40\163\151\154\151\x6e\x64\151\x2e"; } } goto padJm; gukZe: ?>
</select></div><div class="mb-3"><label class="form-label"for="employee_id">Personel Seçin</label> <select class="form-select"id="employee_id"name="employee_id"required><option value="">Personel seçin</option><?php  goto OK_WP; sCTc3: $cards = array(); goto WJ6Fe; ToXkM: ?>
</h4><p><?php  goto AmBum; cGiXQ: $userRole = $_SESSION["\x72\157\x6c\x65"]; goto LSVeC; sGIES: $employees = array(); goto ZaM1D; XVCk4: echo $userName; goto ToXkM; XAjb8: ?>
</ul></nav><div class="sidebar-footer"><a href="profile.php"><i class="fas fa-user-circle"></i> Profil</a> <a href="logout.php"><i class="fas fa-sign-out-alt"></i> Çıkış</a></div></aside><main class="main-content"><header class="header"><div class="header-left"><button class="sidebar-toggle"id="sidebar-toggle"><i class="fas fa-bars"></i></button><h2>Kart Yönetimi</h2></div><div class="header-right"><div class="notification"><i class="fas fa-bell"></i> <span class="badge">3</span></div><div class="date-time"><span id="current-date"></span> <span id="current-time"></span></div></div></header><div class="content-wrapper"><div class="animate__animated animate__fadeIn card-management"><?php  goto h2vg0; MzjGh: ?>
</tbody></table></div></div></div></div></div></main></div><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script><script src="js/main.js"></script></body></html>